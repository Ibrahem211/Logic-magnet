* توصيف الحالة *
تدور المسألة حول لعبة ألغاز تعتمد على التحريك الذكي للمغناطيسات بهدف تغطية جميع الخلايا الهدف (المشار إليها برقم صفر) على لوحة مكونة من شبكة ثنائية الأبعاد (n*n) (مصفوفة). تتضمن اللعبة نوعين من المغناطيسات: المغناطيس البنفسجي والمغناطيس الأحمر، حيث يمتلك كل منهما حركة مستقلة ضمن الشبكة. تتضمن الخلايا أنواعًا مختلفة:

الخلايا الهدف (0): الهدف هو تغطيتها بالكامل عن طريق ايصال خلايا الحديد لها 
خلايا الحديد: الخلايا التي قد تكون موجودة في الخلية بشكل ثابت وتتحرك بفعل المغناطيس
الخلايا الفارغة: وهي الخلايا التي تحتوي على *
الهدف من المسألة
يتمثل الهدف الرئيسي في إيجاد مسار صحيح ومتكامل لقطع الحديد التي تتحرك بتأثير المغناطيسات بحيث يتم تغطية جميع الخلايا الهدف عبر وصول أحد القطع الحديدية او المغناطيس لها.

مكونات الحالة
الشبكة (مصفوفة ثنائية الأبعاد): تمثل اللوحة وتحدد مواقع المغناطيسات، والخلايا الهدف، وخلايا الحديد.

المغناطيسات:

المغناطيس البنفسجي: له نقطة بداية محددة ويقوم بحركة منتظمة باتجاهات الأربعة (أعلى، أسفل، يسار، يمين).
المغناطيس الأحمر (اختياري): يظهر في بعض المستويات وله مسار حركة مستقل ومشابه للمغناطيس البنفسجي.
الحركات المتاحة: يستطيع كل مغناطيس التحرك إلى أي خلية إذا كانت الخلية متاحة (فارغة أو هدف).

الشروط النهائية (الفوز): تتحقق حالة الفوز عندما يتم تغطية جميع الخلايا الهدف (0) بواسطة أحد القطع الحديدية او المغناطيس، بحيث لا يتبقى أي خلية هدف غير مغطاة.

_______________________________________________________________________________________________________________________________________________

الحالة الابتدائية

المغناطيس البنفسجي والمغناطيس الأحمر:

يتم تحديد مواضع المغناطيسين البنفسجي والأحمر في اللوحة في بداية اللعبة.
قد يكون المغناطيس الأحمر موجودًا أو غير موجود في بعض الحالات.
اللوحة (Board):

اللوحة هي عبارة عن شبكة من الخلايا ( مربعة) تحتوي على قيم تمثل:
الخلايا الهدف (تُمثل بـ 0).
الخلايا الفارغة  (تُمثل بـ *).
الخلايا التي تحتوي على قطع الحديد (تُمثل بـ H).
المغناطيسات:

المغناطيس البنفسجي (مُمثل بـ P) والمغناطيس الأحمر (مُمثل بـ R) في البداية يكونان في خلايا معينة.
الهدف من تحريك المغناطيسات هو دفع أو جذب قطع الحديد إلى الخلايا الفارغة.
الشروط الابتدائية:

يجب أن يتم تحديد:
مواضع المغناطيس البنفسجي (ويمكن أن تكون None إذا لم يكن موجودًا).
مواضع المغناطيس الأحمر (ويمكن أن تكون None إذا لم يكن موجودًا).
الأماكن التي تحتوي على قطع الحديد التي يجب تحريكها.
يتم إعطاء اللوحة مع المغناطيسات والحواجز في البداية، والمغناطيسات يجب أن تتحرك بطريقة استراتيجية لتحقيق الهدف (دفع قطع الحديد إلى الخلايا الهدف).
تفاصيل الحالة الابتدائية:
اللوحة (Board):

يتم تمثيلها كمصفوفة ذات أبعاد n x n تحتوي على خلايا معينة مثل:
0: خلية هدف (مكان يمكن وضع المغناطيس أو قطع الحديد فيها).
*: خلية فارغة ( يمكن للمغناطيس أو قطع الحديد الانتقال إليها).
H: خلية تحتوي على قطعة حديد (الهدف هو تحريك هذه القطع إلى الخلايا الهدف بواسطة المغناطيسات).
المغناطيسات:

المغناطيس البنفسجي (P) أو المغناطيس الأحمر (R) يمكن وضعهم في مواقع معينة في اللوحة.
المغناطيس يتحرك في اتجاهات معينة (أعلى، أسفل، يمين، يسار) ويتسبب في جذب أو دفع قطع الحديد إلى الخلايا الفارغة.
الأهداف:

الهدف النهائي هو أن تقوم كل قطع الحديد بالانتقال إلى الخلايا الهدف (0)، دون أن يمر المغناطيسات عليها أو تؤثر عليها بشكل خاطئ.

_______________________________________________________________________________________________________________________________

فضاء الحالة
فضاء الحالة يتكون من جميع الحالات الممكنة التي يمكن أن تتواجد فيها اللعبة من بداية اللعبة وحتى الوصول إلى حالة الفوز. كل حالة تمثل اللوحة (الشبكة ثنائية الأبعاد) مع مواقع المغناطيسات وقطع الحديد،

2. مكونات فضاء الحالة
فضاء الحالة يعتمد على عدة عناصر:

اللوحة (Board): تمثل المصفوفة التي تحتوي على الخلايا المختلفة:

0: الخلايا الهدف.
*: الخلايا الفارغة التي يمكن للمغناطيسات أو قطع الحديد التحرك إليها.
H: الخلايا التي تحتوي على قطع الحديد.
P: مغناطيس بنفسجي.
R: مغناطيس أحمر.
المغناطيسات:

المغناطيس البنفسجي (P): يبدأ في نقطة معينة ويمكنه تحريك قطع الحديد إلى الخلايا الفارغة.
المغناطيس الأحمر (R): إذا كان موجودًا، يمكنه أيضًا تحريك قطع الحديد إلى الخلايا الفارغة.
الأهداف:

خلايا الهدف (0): يجب تغطيتها بواسطة قطع الحديد.
الخطوات:

يجب حفظ الحركات التي تم إجراؤها لتحديد المسار الذي تم السير فيه.
الدور الحالي:

يتتبع أي مغناطيس يتحرك في اللحظة الحالية: المغناطيس البنفسجي أو المغناطيس الأحمر، وذلك لتحديد المسار بشكل دقيق.
3. التوسع في فضاء الحالة
العدد الإجمالي للحالات: فضاء الحالة يتسع بشكل كبير مع زيادة حجم اللوحة (n x n)، حيث أن كل تغيير في مكان المغناطيس أو قطعة الحديد يمثل حالة جديدة. كما أن وجود حديد أو مغناطيسات إضافية يزيد من تعقيد فضاء الحالة.

الحركات الممكنة:

المغناطيس البنفسجي (P): يمكن أن يتحرك في أربع اتجاهات (أعلى، أسفل، يمين، يسار) لتحريك قطع الحديد.
المغناطيس الأحمر (R): إذا كان موجودًا، يتحرك بنفس الطريقة كما يتحرك المغناطيس البنفسجي.
قطع الحديد (H): يتحرك بفعل المغناطيسات ويجب تحريكها إلى الخلايا الهدف (0) .
4. البحث في فضاء الحالة
الهدف من البحث في فضاء الحالة هو إيجاد سلسلة من الحركات (من قبل المغناطيسات) التي تؤدي إلى الحالة التي تحتوي على جميع الخلايا الهدف مغطاة بقطع الحديد.

خطوات البحث:
استراتيجية البحث: يمكن استخدام الخوارزميات مثل BFS (بحث العرض أولاً) أو DFS (بحث العمق أولاً) لاستكشاف جميع الحالات الممكنة وتحديد المسار الذي يؤدي إلى الحل.
الشروط النهائية (الفوز): تعتبر الحالة هدفًا عندما تغطي جميع الخلايا الهدف (0) باستخدام قطع الحديد.
تمثيل الحالة:
تمثل الحالة الحالية في فضاء الحالة باستخدام:

اللوحة الحالية.
موقع المغناطيس البنفسجي.
موقع المغناطيس الأحمر (إذا كان موجودًا).
قائمة الحركات التي تم إجراؤها.
الدور الحالي (أي المغناطيس يتحرك الآن).
5. قيود فضاء الحالة
التكرار: قد تظهر بعض الحالات عدة مرات (أي أن الوضع يتكرر في أكثر من خطوة). لذلك، يتم استخدام مجموعات (sets) لتتبع الحالات التي تم زيارتها بالفعل ومنع التكرار.
المغناطيسات وقطع الحديد: المغناطيس يتسبب فقط في تحريك قطع الحديد.
6. تعريف الفضاء باستخدام الخوارزمية
في الخوارزميات التي تعتمد على فضاء الحالة، مثل BFS أو DFS، يتم تمثيل كل حالة في الفضاء ككائن يحتوي على:
اللوحة.
مواقع المغناطيسات.
مواقع قطع الحديد.
قائمة بالخطوات التي تم اتخاذها (لحفظ تسلسل الحركات).
الدور الحالي للمغناطيس.
مثال على فضاء الحالة:

الحالة الابتدائية:

اللوحة: مصفوفة (5x5) تحتوي على بعض الأهداف (0)، الخلايا الفارغة (*)، وبعض قطع الحديد (H).
المغناطيس البنفسجي (P) في الخلية (0,0).
المغناطيس الأحمر (R) في الخلية (4,4) إذا كان موجودًا.
لا توجد قطع حديد في الخلايا الهدف.
الهدف هو تغطية جميع الخلايا الهدف (0) باستخدام المغناطيسات.
الحالة النهائية (الفوز):

جميع الخلايا التي تحتوي على (0) تم تغطيتها باستخدام قطع الحديد.

________________________________________________________________________________

الاجراءات : 

الإجراءات في سياق هذه المسألة تُشير إلى العمليات أو الحركات التي تتم على اللوحة والتي تهدف إلى دفع أو جذب قطع الحديد باستخدام المغناطيسات لتغطية جميع الخلايا الهدف (الخلايا التي تحتوي على الرقم 0). هذه الإجراءات تشمل تحريك المغناطيسات ودفع قطع الحديد.

1. تحريك المغناطيسات
يجب أن يتحرك كل مغناطيس (بنفسيجي أو أحمر) في الشبكة باستخدام حركات محددة:

المغناطيس البنفسجي (P): يمكنه التحرك في أربع اتجاهات (أعلى، أسفل، يسار، يمين) ولكن لا يمكنه المرور عبر الخلايا التي تحتوي على الحديد.
المغناطيس الأحمر (R): يمكنه التحرك في نفس الاتجاهات، ولكن بشرط أن يحرك قطع الحديد نحو الخلايا الفارغة.
2. دفع قطع الحديد
كل مغناطيس البنفسجي  يمكنه دفع قطعة حديد إلى الخلايا المجاورة إذا كانت الخلية فارغة (*)، لكن لا يمكن أن يدفع الحديد إلى الخلايا التي تحتوي على مغناطيس.

3. التفاعلات بين المغناطيس وقطع الحديد
عندما يتحرك المغناطيس إلى جانب خلية تحتوي على قطعة حديد (H):

يتحرك الحديد في نفس الاتجاه الذي يتحرك فيه المغناطيس.
المغناطيس يدفع قطعة الحديد إلى الخلايا المجاورة إذا كانت الخلية الفارغة.
يجب أن يبقى الحديد في الاتجاه الذي يحركه المغناطيس دون أن يخرج عن حدود اللوحة.
4. التفاعل مع الخلايا الهدف (0)
، ولكن الهدف هو نقل قطع الحديد الى الخلايا الهدف.
عند وصول قطعة الحديد إلى الخلية الهدف، تُعتبر هذه الخلية قد تم تغطيتها.
الإجراءات المحددة التي سيتم تنفيذها تشمل:
5. إجراءات تحريك المغناطيسات (P و R)
التحرك إلى الخلية المجاورة: المغناطيس يتحرك في اتجاهات أفقية وعمودية (أعلى، أسفل، يسار، يمين) طالما أن الخلية المجاورة فارغة أو تحتوي على قطعة حديد يمكن تحريكها.
دفع الحديد: إذا وصل المغناطيس إلى خلية تحتوي على قطعة حديد، يمكنه دفع الحديد إلى الخلية المجاورة إذا كانت فارغة.
التفاعل مع المغناطيسات الأخرى: إذا كان هناك مغناطيس آخر في الطريق، يجب أن يؤثر على الحركات (يجب تجنب التداخل بين المغناطيسات).
6. إجراءات تحريك قطع الحديد
دفع القطعة إلى هدف: المغناطيس يدفع قطعة الحديد إلى الخلية الهدف (0)، عند وصول قطعة الحديد إلى خلية هدف، يتم تغطية الخلية.
تحرك القطعة إلى الخلية الفارغة: إذا كانت الخلية المجاورة فارغة (*)، يمكن نقل القطعة إلى هناك.
7. إجراءات الفوز
التحقق من الفوز: بعد كل حركة، يتم التحقق إذا كانت جميع الخلايا الهدف (0) قد تم تغطيتها بواسطة قطع الحديد. إذا تم تغطية جميع الخلايا الهدف، فهذا يعني أن اللعبة قد انتهت.
8. التحقق من شروط الحركات
التحقق من القيود:
المغناطيس لا يمكنه المرور عبر الخلايا التي تحتوي حديد.
المغناطيس لا يمكنه تجاوز الحدود (أي الخلايا خارج نطاق الشبكة).
المغناطيس لا يمكنه تحريك قطع الحديد في الاتجاه الخاطئ أو الخلايا المحظورة.
الإجراءات التفصيلية في الخوارزمية
تحريك المغناطيس (P أو R) إلى خلية مجاورة:

المغناطيس البنفسجي (P) أو المغناطيس الأحمر (R) يمكنهما التحرك إلى خلية مجاورة إذا كانت فارغة أو تحتوي على هدف يمكن تحريكها.
إذا كان المغناطيس يمر على قطعة حديد، يتم دفع القطعة في الاتجاه نفسه.
دفع الحديد إلى خلية مجاورة:

إذا كانت الخلية المجاورة فارغة، يتم دفع قطعة الحديد إليها.
إذا كانت الخلية المجاورة هي خلية هدف (0)، يتم تغطية الخلية الهدف بهذه القطعة الحديدية.
التحقق من فوز اللعبة:

في كل خطوة، يجب التحقق من حالة اللوحة للتأكد من أن جميع الخلايا الهدف (0) قد تم تغطيتها بواسطة قطع الحديد.
تحديد الحركات القانونية:

يجب التحقق من جميع الحركات المتاحة للمغناطيس (P أو R) وتحديد أي منها يمكن أن يؤدي إلى تغطية الخلايا الهدف.


_________________________________________________________________________________________________________________________________

لحالة النهائية:
نجاح: جميع الخلايا الهدف تم تغطيتها بالحديد، وهذه هي الحالة النهائية المطلوبة.
فشل: إذا كانت هناك خلايا هدف غير مغطاة بالحديد، فهذه ليست الحالة النهائية.
الاستنتاج:
بناءً على هذا التوصيف، يمكننا القول أن الحالة النهائية هي الحالة التي تكون فيها جميع الخلايا الهدف (0) قد تم تغطيتها بشكل صحيح بواسطة قطع الحديد باستخدام المغناطيسات، وتكون اللعبة قد انتهت بنجاح.